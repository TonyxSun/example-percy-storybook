(self.webpackChunkexample_percy_storybook=self.webpackChunkexample_percy_storybook||[]).push([[606],{"./js/TodoApp.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{App:()=>App,Input:()=>Input,Template:()=>Template,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TodoApp_stories});var dist=__webpack_require__("./node_modules/@storybook/testing-library/dist/index.mjs"),jest_dist=__webpack_require__("./node_modules/@storybook/jest/dist/index.mjs"),react=__webpack_require__("./node_modules/react/index.js"),TodoItem=__webpack_require__("./js/TodoItem.js"),TodoFooter=__webpack_require__("./js/TodoFooter.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function uuid(){let i,random,uuid="";for(i=0;i<32;i++)random=16*Math.random()|0,8!==i&&12!==i&&16!==i&&20!==i||(uuid+="-"),uuid+=(12===i?4:16===i?3&random|8:random).toString(16);return uuid}function TodoApp({todos:initTodos=[],showTodos:initShowTodos="all"}){let[newTodo,setNewTodo]=(0,react.useState)(""),[editing,setEditing]=(0,react.useState)(null),[showTodos,setShowTodos]=(0,react.useState)(initShowTodos),[todos,updateTodos]=(0,react.useReducer)(((all,action)=>{switch(action.type){case"add":return all.concat({id:uuid(),title:action.title,completed:!1});case"destroy":return all.filter((t=>t.id!==action.id));case"save":return all.map((t=>t.id!==action.id?t:{...t,title:action.title}));case"toggle":return all.map((t=>t.id!==action.id?t:{...t,completed:!t.completed}));case"toggleAll":return all.map((t=>({...t,completed:action.completed})));case"clearCompleted":return all.filter((t=>!t.completed));default:return all}}),initTodos,(all=>all.map((t=>({id:uuid(),completed:!1,...t}))))),activeTodoCount=(0,react.useMemo)((()=>todos.reduce(((c,t)=>t.completed?c:c+1),0)),[todos]),completedTodoCount=(0,react.useMemo)((()=>todos.length-activeTodoCount),[todos]);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("header",{className:"header",children:[(0,jsx_runtime.jsx)("h1",{children:"todos"}),(0,jsx_runtime.jsx)("input",{autoFocus:!0,className:"new-todo","data-testid":"new-todo",placeholder:"What needs to be done?",value:newTodo,onChange:e=>{setNewTodo(e.target.value)},onKeyDown:e=>{if(13!==e.keyCode)return;e.preventDefault();let title=newTodo.trim();title&&(updateTodos({type:"add",title}),setNewTodo(""))}})]}),todos.length?(0,jsx_runtime.jsxs)("section",{className:"main",children:[(0,jsx_runtime.jsx)("input",{id:"toggle-all",type:"checkbox",className:"toggle-all",checked:0===activeTodoCount,onChange:e=>updateTodos({type:"toggleAll",completed:e.target.checked})}),(0,jsx_runtime.jsx)("label",{htmlFor:"toggle-all"}),(0,jsx_runtime.jsx)("ul",{className:"todo-list",children:todos.reduce(((todos,{id,title,completed})=>"all"===showTodos||"active"===showTodos&&!completed||"completed"===showTodos&&completed?todos.concat((0,jsx_runtime.jsx)(TodoItem.Z,{title,completed,editing:editing===id,onEdit:()=>setEditing(id),onCancel:()=>setEditing(null),onToggle:()=>updateTodos({type:"toggle",id}),onDestroy:()=>updateTodos({type:"destroy",id}),onSave:title=>{updateTodos({type:"save",id,title}),setEditing(null)}},id)):todos),[])})]}):null,activeTodoCount||completedTodoCount?(0,jsx_runtime.jsx)(TodoFooter.Z,{showTodos,activeCount:activeTodoCount,completedCount:completedTodoCount,onClearCompleted:()=>updateTodos({type:"clearCompleted"}),onShowTodos:setShowTodos}):null]})}TodoApp.displayName="TodoApp";const TodoApp_stories={title:"TodoApp",component:TodoApp},Template=args=>(0,jsx_runtime.jsx)(TodoApp,{...args});Template.displayName="Template",Template.args={showTodos:"all",todos:[{title:"Foo",completed:!0},{title:"Bar",completed:!0},{title:"Baz"},{title:"Qux"},{title:"Xyzzy"}]};const App=Template.bind({}),Input=Template.bind({});App.args={...Template.args},Input.args={...Template.args},Input.play=async({canvasElement})=>{const canvas=(0,dist.uh)(canvasElement),input=await canvas.getByTestId("new-todo");await dist.mV.type(input,"ahoy!{enter}"),await(0,jest_dist.l)(canvas.getByDisplayValue("ahoy!")).toBeInTheDocument(),input.classList.add("percy-selector-placeholder")},Input.parameters={percy:{waitForSelector:".percy-selector-placeholder"}};const __namedExportsOrder=["Template","App","Input"]},"./js/TodoFooter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>TodoFooter});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function TodoFooter({activeCount,completedCount,showTodos,onClearCompleted,onShowTodos}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("footer",{className:"footer",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("span",{className:"todo-count",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("strong",{children:activeCount}),(count=activeCount,word=" item",1===count?word:word+"s")," left"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("ul",{className:"filters",children:["all","active","completed"].map((filter=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("li",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("a",{style:{cursor:"pointer"},onClick:()=>(onShowTodos(filter),!1),className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({selected:showTodos===filter}),children:[filter[0].toUpperCase(),filter.substring(1)]})},filter)))}),completedCount>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:"clear-completed",onClick:onClearCompleted,children:"Clear completed"}):null]});var count,word}TodoFooter.displayName="TodoFooter"},"./js/TodoItem.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>TodoItem});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ESCAPE_KEY=27,ENTER_KEY=13;function TodoItem({title,completed,editing,onEdit,onToggle,onCancel,onSave,onDestroy}){let[editText,setEditText]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(title),editField=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),handleSubmit=()=>{let val=editText.trim();val?(onSave(val),setEditText(val)):onDestroy()};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(editing){let len=editField.current.value.length;editField.current.focus(),editField.current.setSelectionRange(len,len)}}),[editing]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("li",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()({completed,editing}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"view",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"checkbox",className:"toggle",checked:completed,onChange:onToggle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("label",{onDoubleClick:()=>{onEdit(),setEditText(title)},children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:"destroy",onClick:onDestroy})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{ref:editField,className:"edit",value:editText,onBlur:handleSubmit,onChange:event=>{editing&&setEditText(event.target.value)},onKeyDown:event=>{event.which===ESCAPE_KEY?(setEditText(title),onCancel(event)):event.which===ENTER_KEY&&handleSubmit()}})]})}TodoItem.displayName="TodoItem"},"?4f7e":()=>{}}]);